@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

<div class="p-5" style="background-color:#f2f2f2; min-height:100vh;">
    <div class="container" ng-controller="Item_Attribute">
        <div class="row">
            <div class="col-12">
                <h1 class="checkout-header-text" align="center">Complete Your Purchase</h1>
            </div>
            <div class="col-lg-12" style=" padding:20px 30px">
                <div class="row">
                    <div class="col-12 p-2" style="background:white;">
                        <div class="row">
                            <div class="col-lg-2">
                                <img src="images/{{name[0].item.img}}" class="img-fluid" />
                            </div>
                            <div class="col-lg-10" style="border-left:solid thick #ab1113">
                                <div class="checkout-product-name">
                                    {{name[0].item.name}}
                                </div>
                                <div class="checkout-product-info">
                                    Highest Bid: <b>${{name[0].size.highest_bid}}</b> | Lowest Ask: <b>${{name[0].size.lowest_ask}}</b><br />
                                    Size <b>{{name[0].dsSize.vn}}</b>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 p-2" style="background:white;">
                        <div class="row">
                            <div class="col-12">
                                <h4 class="checkout-header-text">
                                    Order Summary
                                </h4>
                            </div>
                            <div class="col-12">
                                <table style="font-family:ralemed;width:100%">
                                    <tr>
                                        <td class="td-w25">
                                            Name
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            @HttpContextAccessor.HttpContext.Session.GetString("ck_account").ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="td-w25">
                                            Phone
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            @HttpContextAccessor.HttpContext.Session.GetString("ck_phone").ToString()
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="td-w25">
                                            Address
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            @HttpContextAccessor.HttpContext.Session.GetString("ck_address").ToString()
                                        </td>
                                    </tr>
                                </table>
                                <hr />
                                <table style="font-family:ralemed;width:100%">
                                    <tr>
                                        <td class="td-w25">
                                            Item's Name
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            {{name[0].item.name}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="td-w25">
                                            Brand
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            {{name[0].brand_name}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="td-w25">
                                            Category
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            {{name[0].cate_name}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="td-w25">
                                            Size
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            {{name[0].dsSize.vn}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="td-w25">
                                            Lowest Ask
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            {{name[0].size.lowest_ask}} VND
                                        </td>
                                    </tr>
                                    @if (ViewBag.Act == 1)
                                    {

                                        <tr>
                                            <td class="td-w25">
                                                Bid
                                            </td>
                                            <td class="td-w10">
                                                <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                            </td>
                                            <td class="td-w65 font-weight-bold">
                                                @HttpContextAccessor.HttpContext.Session.GetString("ck_enter_bid")
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="td-w25">
                                                Exp Day
                                            </td>
                                            <td class="td-w10">
                                                <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                            </td>
                                            <td class="td-w65 font-weight-bold">
                                                @HttpContextAccessor.HttpContext.Session.GetString("ck_exp_day") Day
                                            </td>
                                        </tr>
                                    }

                                </table>
                                <hr />
                                <table style="font-family:ralemed;width:100%">
                                    <tr>
                                        <td class="td-w25">
                                            City
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            {{city.name}}
                                        </td>
                                    </tr>
                                </table>
                                <table style="font-family:ralemed;width:100%">
                                    <tr>
                                        <td class="td-w25">
                                            Shipping Fee
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            @HttpContextAccessor.HttpContext.Session.GetString("ck_shipping")
                                        </td>
                                    </tr>
                                </table>
                                <table style="font-family:ralemed;width:100%">
                                    <tr>
                                        <td class="td-w25">
                                            Total
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            @HttpContextAccessor.HttpContext.Session.GetString("ck_total").ToString()
                                        </td>
                                    </tr>
                                </table>
                                <hr />
                                <hr />
                                <table style="font-family:ralemed;width:100%">
                                    <tr>
                                        <td class="td-w25">
                                            Payment Method
                                        </td>
                                        <td class="td-w10">
                                            <i class="fas fa-chevron-right" style="opacity:0.5"></i>
                                        </td>
                                        <td class="td-w65 font-weight-bold">
                                            @HttpContextAccessor.HttpContext.Session.GetString("ck_payment").ToString()
                                        </td>
                                    </tr>
                                </table>
                                <hr />
                            </div>
                            <div class="col-12">
                                <h4 class="checkout-header-text">
                                    How It Works
                                </h4>
                                <div class="row" style="font-family:ralemed">
                                    <div class="col-md-4 mb-2">
                                        Make an offer that any seller can accept; or purchase immediately at the lowest Ask.
                                    </div>
                                    <div class="col-md-4 mb-2">
                                        Seller ships to us. We authenticate, then we release funds to the seller.
                                    </div>
                                    <div class="col-md-4 mb-2">
                                        We ship to you. You sip a daiquiri, knowing you will never get a fake.

                                    </div>
                                    <div class="col-12">
                                        <iframe src="~/term.html" width="100%" height="300px" frameborder="1"></iframe>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 d-flex justify-content-between mt-3">
                                <button class="btn btn-light">
                                    <a href="/Product/Checkout?id=@ViewBag.IdItem">Back</a>
                                </button>
                                <button class="btn checkout-btn isbuy">
                                    <a href="/Product/Confirm_Checkout?id=@ViewBag.IdItem&act=@ViewBag.Act&size={{name[0].size}}">Proceed</a>
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts{
<script>

        //Items Attribute
        exaxxiApp.controller('Item_Attribute', function ($scope, $http) {
            $http.get("/api/ItemsAPI/TakeAttributeItem/" + @ViewBag.IdItem)
                .then(function (response) {
                    $scope.name = response.data;
                    console.log($scope.name);
                });
            $http.get("/api/CitysAPI/" + @HttpContextAccessor.HttpContext.Session.GetInt32("ck_city"))
                .then(function (response) { $scope.city = response.data });
        });

</script>
}
