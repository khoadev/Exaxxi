@model Exaxxi.Models.ds_Size

@{
    ViewData["Title"] = "Edit";
}

<h2>Edit</h2>

<h4>ds_Size</h4>
<hr />
<div class="row" ng-controller="editDsSize">
    <div class="col-md-4">
        <form>
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="id" />
            <div class="form-group">
                <label>Chủng loại</label>
                <select name="singleSelect" id="select" ng-model="selectedDepart" ng-options="depart.vi_name for depart in name"></select>

            </div>
            <div class="form-group">
                <label  class="control-label">VN</label>
                <input id="VN" class="form-control" value="@Model.VN"/>
                <span asp-validation-for="VN" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label  class="control-label">US</label>
                <input  id="US" class="form-control" value="@Model.US"/>
                <span asp-validation-for="US" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">UK</label>
                <input id="UK" class="form-control" value="@Model.UK"/>
                <span asp-validation-for="UK" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Inch</label>
                <input id="Inch" class="form-control" value="@Model.Inch"/>
                <span asp-validation-for="Inch" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Centimet</label>
                <input id="Centimet" class="form-control" value="@Model.Centimet"/>
                <span asp-validation-for="Centimet" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-default" ng-click="sendData()" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List  </a>
</div>

@section Scripts{
    <script>
        app.controller('editDsSize', function ($scope, $http) {
            $http.get("/api/DepartmentsAPI")
                .then(function (response) { $scope.name = response.data; $scope.selectedDepart = $scope.name[0];});
            $scope.sendData = function () {
                var id_department =  $scope.selectedDepart.id;
                var VN = $("#VN").val();
                var US = $("#US").val();
                var UK = $("#UK").val();
                var Inch = $("#Inch").val();
                var Centimet = $("#Centimet").val();


                var ds_Size = {
                    "VN": VN,
                    "US": US,
                    "UK": UK,
                    "Inch": Inch,
                    "Centimet": Centimet,
                    "id_Depart": id_department
                };
                var config = {
                    headers: {
                        'Context-Type': 'application/json',
                        'Authorization': 'Bearer ' + sessionStorage.getItem('token')
                    }
                }
                $scope.id_department = @Model.id_Depart;
                var url = "/api/ds_SizeChange/" + @Model.id;
                $http.put(url,JSON.stringify(ds_Size),config).then(function (response) {
                    alert("thanh cong");
                }, function error(response) {
                    // this function will be called when the request returned error status
                    alert("that bai");

                });
            };
        });
    </script>
}